{"version":3,"file":"pointer-domain-search/view.js","mappings":"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","sources":["webpack://pointer-domain-search/./src/pointer-domain-search/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n/**\n * Domain Search Functionality\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const searchForms = document.querySelectorAll('.wp-block-create-block-pointer-domain-search');\n\n    searchForms.forEach(form => {\n        const searchInput = form.querySelector('.pointer-domain-search-input');\n        const searchButton = form.querySelector('.pointer-domain-search-button');\n        const tldCheckboxes = form.querySelectorAll('.pointer-domain-search-tld');\n        const searchResults = form.querySelector('.pointer-domain-search-results');\n        const loadingDiv = form.querySelector('.pointer-domain-search-loading');\n        const errorDiv = form.querySelector('.pointer-domain-search-error');\n        const nonce = form.getAttribute('data-nonce');\n\n        // Event listener για το κουμπί αναζήτησης\n        searchButton.addEventListener('click', () => {\n            performSearch();\n        });\n\n        // Event listener για το Enter στο input\n        searchInput.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter') {\n                e.preventDefault();\n                performSearch();\n            }\n        });\n\n        function performSearch() {\n            // Έλεγχος αν το input είναι κενό\n            if (!searchInput.value.trim()) {\n                showError('Παρακαλούμε εισάγετε ένα όνομα domain.');\n                return;\n            }\n\n            // Λήψη των επιλεγμένων TLDs από τα checkboxes\n            let selectedTlds = Array.from(tldCheckboxes)\n                .filter(checkbox => checkbox.checked)\n                .map(checkbox => checkbox.value);\n\n            if (selectedTlds.length === 0) {\n                showError('Παρακαλούμε επιλέξτε τουλάχιστον ένα TLD.');\n                return;\n            }\n\n            // Αρχικός καθαρισμός του domain\n            let domain = searchInput.value.trim();\n\n            // Έλεγχος αν ο χρήστης έχει γράψει domain με TLD\n            const dotPosition = domain.lastIndexOf('.');\n            if (dotPosition !== -1) {\n                const inputTld = '.' + domain.substring(dotPosition + 1).toLowerCase();\n\n\t\t\t\tconsole.log({inputTld, selectedTlds});\n\n                // Έλεγχος αν το TLD που έγραψε ο χρήστης είναι στη λίστα των διαθέσιμων\n                const availableTlds = Array.from(tldCheckboxes).map(checkbox => checkbox.value);\n                if (availableTlds.includes(inputTld)) {\n                    // Αν το TLD δεν είναι ήδη στα επιλεγμένα, το προσθέτουμε\n                    if (!selectedTlds.includes(inputTld)) {\n                        selectedTlds.push(inputTld);\n                        // Βρίσκουμε και επιλέγουμε οπτικά το checkbox αν δεν είναι ήδη επιλεγμένο\n                        const tldCheckbox = Array.from(tldCheckboxes).find(checkbox => checkbox.value === inputTld);\n                        if (tldCheckbox && !tldCheckbox.checked) {\n                            tldCheckbox.checked = true;\n\n                            // Εμφάνιση μηνύματος ενημέρωσης ότι προστέθηκε το TLD\n                            showNotification(`Προστέθηκε αυτόματα το TLD ${inputTld} στην αναζήτηση`);\n                        }\n                    }\n\n                    // Αφαιρούμε το TLD από το domain\n                    domain = domain.substring(0, dotPosition);\n                }\n            }\n\n            // Καθαρισμός προηγούμενων αποτελεσμάτων\n            clearResults();\n\n            // Αφαίρεση τυχόν TLD από το input (για περίπτωση που δεν αφαιρέθηκε παραπάνω)\n            selectedTlds.forEach(tld => {\n                const dotTld = `.${tld}`;\n                if (domain.endsWith(dotTld)) {\n                    domain = domain.slice(0, -dotTld.length);\n                }\n            });\n\n            // Εμφάνιση φόρτωσης\n            loadingDiv.classList.add('active');\n\n            // AJAX αίτημα για αναζήτηση domain\n            const formData = new FormData();\n            formData.append('action', 'pointer_domain_search');\n            formData.append('nonce', nonce);\n            formData.append('domain', domain);\n            formData.append('tlds', JSON.stringify(selectedTlds));\n\n            fetch(wpDomainSearch.ajaxUrl, {\n                method: 'POST',\n                credentials: 'same-origin',\n                body: formData\n            })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Network response was not ok');\n                }\n                return response.json();\n            })\n            .then(data => {\n                loadingDiv.classList.remove('active');\n\n                if (data.success === false) {\n                    showError(data.data || 'Υπήρξε ένα σφάλμα κατά την αναζήτηση.');\n                    return;\n                }\n\n                displayResults(data.data);\n            })\n            .catch(error => {\n                loadingDiv.classList.remove('active');\n                showError('Υπήρξε ένα σφάλμα κατά την αναζήτηση: ' + error.message);\n            });\n        }\n\n        function displayResults(results) {\n            if (!results || Object.keys(results).length === 0) {\n                showError('Δεν βρέθηκαν αποτελέσματα.');\n                return;\n            }\n\n            // Έλεγχος για το αν θα εμφανιστεί το κουμπί αγοράς\n            const showBuyButton = form.getAttribute('data-show-buy-button') === '1';\n\n            const resultsHtml = Object.entries(results).map(([domain, available]) => {\n                const availableClass = available === '1' || available === 1\n                    ? 'pointer-domain-search-result-available'\n                    : 'pointer-domain-search-result-unavailable';\n\n                const availableText = available === '1' || available === 1\n                    ? 'Διαθέσιμο'\n                    : 'Μη διαθέσιμο';\n\n                // Προσθήκη κουμπιού για αγορά αν είναι διαθέσιμο και επιτρέπεται από τις ρυθμίσεις\n                const buyButton = (available === '1' || available === 1) && showBuyButton\n                    ? `<a href=\"https://www.pointer.gr/domain-names/search?domain-name=${domain}\" target=\"_blank\" class=\"pointer-domain-search-buy-button\">Αγορά</a>`\n                    : '';\n\n                return `\n                    <div class=\"pointer-domain-search-result-item\">\n                        <strong>${domain}</strong>: <span class=\"${availableClass}\">${availableText}</span>\n                        ${buyButton}\n                    </div>\n                `;\n            }).join('');\n\n            searchResults.innerHTML = resultsHtml;\n        }\n\n        function showError(message) {\n            errorDiv.textContent = message;\n            errorDiv.classList.add('active');\n        }\n\n        function clearResults() {\n            searchResults.innerHTML = '';\n            errorDiv.textContent = '';\n            errorDiv.classList.remove('active');\n        }\n\n        // Προσθήκη συνάρτησης για εμφάνιση προσωρινών ειδοποιήσεων\n        function showNotification(message) {\n            // Έλεγχος αν υπάρχει ήδη το στοιχείο ειδοποίησης\n            let notification = form.querySelector('.pointer-domain-search-notification');\n\n            // Αν δεν υπάρχει, το δημιουργούμε\n            if (!notification) {\n                notification = document.createElement('div');\n                notification.className = 'pointer-domain-search-notification';\n                form.appendChild(notification);\n\n                // Προσθήκη στυλ για την ειδοποίηση\n                notification.style.position = 'absolute';\n                notification.style.top = '100px';\n                notification.style.right = '20px';\n                notification.style.padding = '10px 15px';\n                notification.style.backgroundColor = '#4CAF50';\n                notification.style.color = 'white';\n                notification.style.borderRadius = '4px';\n                notification.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';\n                notification.style.opacity = '0';\n                notification.style.transition = 'opacity 0.3s ease';\n                notification.style.zIndex = '1000';\n            }\n\n            // Προσθέτουμε το μήνυμα\n            notification.textContent = message;\n\n            // Εμφανίζουμε την ειδοποίηση\n            setTimeout(() => {\n                notification.style.opacity = '1';\n            }, 10);\n\n            // Και μετά από 3 δευτερόλεπτα την κρύβουμε\n            setTimeout(() => {\n                notification.style.opacity = '0';\n            }, 3000);\n        }\n    });\n});\n"],"names":["document","addEventListener","searchForms","querySelectorAll","forEach","form","searchInput","querySelector","searchButton","tldCheckboxes","searchResults","loadingDiv","errorDiv","nonce","getAttribute","performSearch","e","key","preventDefault","value","trim","showError","selectedTlds","Array","from","filter","checkbox","checked","map","length","domain","dotPosition","lastIndexOf","inputTld","substring","toLowerCase","console","log","availableTlds","includes","push","tldCheckbox","find","showNotification","clearResults","tld","dotTld","endsWith","slice","classList","add","formData","FormData","append","JSON","stringify","fetch","wpDomainSearch","ajaxUrl","method","credentials","body","then","response","ok","Error","json","data","remove","success","displayResults","catch","error","message","results","Object","keys","showBuyButton","resultsHtml","entries","available","availableClass","availableText","buyButton","join","innerHTML","textContent","notification","createElement","className","appendChild","style","position","top","right","padding","backgroundColor","color","borderRadius","boxShadow","opacity","transition","zIndex","setTimeout"],"sourceRoot":""}